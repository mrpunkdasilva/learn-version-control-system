<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#EB6237"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-05-08T18:28:52.369878297"><title>Configura&ccedil;&atilde;o do GitLab | Git Pie: A Arte Ancestral do Versionamento ü•ß</title><script type="application/json" id="virtual-toc-data">[{"id":"configura-o-b-sica","level":0,"title":"Configura√ß√£o B√°sica","anchor":"#configura-o-b-sica"},{"id":"personaliza-o-da-interface","level":0,"title":"Personaliza√ß√£o da Interface","anchor":"#personaliza-o-da-interface"},{"id":"configura-o-de-email","level":0,"title":"Configura√ß√£o de Email","anchor":"#configura-o-de-email"},{"id":"autentica-o-e-autoriza-o","level":0,"title":"Autentica√ß√£o e Autoriza√ß√£o","anchor":"#autentica-o-e-autoriza-o"},{"id":"configura-o-de-armazenamento","level":0,"title":"Configura√ß√£o de Armazenamento","anchor":"#configura-o-de-armazenamento"},{"id":"configura-o-de-performance","level":0,"title":"Configura√ß√£o de Performance","anchor":"#configura-o-de-performance"},{"id":"configura-o-de-seguran-a","level":0,"title":"Configura√ß√£o de Seguran√ßa","anchor":"#configura-o-de-seguran-a"},{"id":"monitoramento-e-logs","level":0,"title":"Monitoramento e Logs","anchor":"#monitoramento-e-logs"},{"id":"integra-o-com-runners","level":0,"title":"Integra√ß√£o com Runners","anchor":"#integra-o-com-runners"},{"id":"configura-es-avan-adas","level":0,"title":"Configura√ß√µes Avan√ßadas","anchor":"#configura-es-avan-adas"},{"id":"pr-ximos-passos","level":0,"title":"Pr√≥ximos Passos","anchor":"#pr-ximos-passos"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/customize.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Configura&ccedil;&atilde;o do GitLab | Git Pie: A Arte Ancestral do Versionamento ü•ß"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Git Pie: A Arte Ancestral do Versionamento ü•ß Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/gitlab-configuration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Configura&ccedil;&atilde;o do GitLab | Git Pie: A Arte Ancestral do Versionamento ü•ß"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/gitlab-configuration.html#webpage",
    "url": "writerside-documentation/gitlab-configuration.html",
    "name": "Configura&ccedil;&atilde;o do GitLab | Git Pie: A Arte Ancestral do Versionamento ü•ß",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Git Pie: A Arte Ancestral do Versionamento ü•ß Help"
}</script><!-- End Schema.org --></head><body data-id="gitlab-configuration" data-main-title="Configura√ß√£o do GitLab" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="GitLab"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Git Pie: A Arte Ancestral do Versionamento ü•ß  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="gitlab-configuration" id="gitlab-configuration.md">Configura√ß√£o do GitLab</h1><div class="code-block" data-lang="none">
+------------------------+
| GitLab Configuration  |
|                       |
| Personaliza√ß√£o        |
| Integra√ß√£o            |
| Seguran√ßa             |
| Performance           |
|                       |
| Adapta√ß√£o Completa    |
+------------------------+
</div><section class="chapter"><h2 id="configura-o-b-sica" data-toc="configura-o-b-sica">Configura&ccedil;&atilde;o B&aacute;sica</h2><section class="chapter"><h3 id="arquivo-de-configura-o-principal" data-toc="arquivo-de-configura-o-principal">Arquivo de Configura&ccedil;&atilde;o Principal</h3><p id="-bh4wnk_18">O arquivo principal de configura&ccedil;&atilde;o do GitLab &eacute; o <code class="code" id="-bh4wnk_20">/etc/gitlab/gitlab.rb</code> para instala&ccedil;&otilde;es Omnibus. Todas as configura&ccedil;&otilde;es s&atilde;o centralizadas neste arquivo.</p><div class="code-block" data-lang="bash">
# Editar configura√ß√£o
sudo vim /etc/gitlab/gitlab.rb

# Aplicar altera√ß√µes
sudo gitlab-ctl reconfigure
</div></section><section class="chapter"><h3 id="url-externa" data-toc="url-externa">URL Externa</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
external_url 'https://gitlab.exemplo.com'
</div></section><section class="chapter"><h3 id="configura-es-de-https" data-toc="configura-es-de-https">Configura&ccedil;&otilde;es de HTTPS</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
# Habilitar HTTPS
external_url 'https://gitlab.exemplo.com'
nginx['redirect_http_to_https'] = true

# Certificados Let's Encrypt
letsencrypt['enable'] = true
letsencrypt['contact_emails'] = ['admin@exemplo.com']

# Certificados personalizados
nginx['ssl_certificate'] = &quot;/etc/gitlab/ssl/gitlab.exemplo.com.crt&quot;
nginx['ssl_certificate_key'] = &quot;/etc/gitlab/ssl/gitlab.exemplo.com.key&quot;
</div></section></section><section class="chapter"><h2 id="personaliza-o-da-interface" data-toc="personaliza-o-da-interface">Personaliza&ccedil;&atilde;o da Interface</h2><section class="chapter"><h3 id="logo-e-apar-ncia" data-toc="logo-e-apar-ncia">Logo e Apar&ecirc;ncia</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['gitlab_logo'] = 'logo.png'
gitlab_rails['gitlab_favicon'] = 'favicon.ico'

# Cores e estilo
gitlab_rails['brand_primary_color'] = '#1d75b3'
gitlab_rails['brand_secondary_color'] = '#107a10'
</div></section><section class="chapter"><h3 id="p-gina-de-login" data-toc="p-gina-de-login">P&aacute;gina de Login</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['gitlab_signin_enabled'] = true
gitlab_rails['gitlab_signin_text'] = 'Bem-vindo ao GitLab da Empresa XYZ'
</div></section></section><section class="chapter"><h2 id="configura-o-de-email" data-toc="configura-o-de-email">Configura&ccedil;&atilde;o de Email</h2><section class="chapter"><h3 id="smtp" data-toc="smtp">SMTP</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['smtp_enable'] = true
gitlab_rails['smtp_address'] = &quot;smtp.office365.com&quot;
gitlab_rails['smtp_port'] = 587
gitlab_rails['smtp_user_name'] = &quot;gitlab@empresa.com&quot;
gitlab_rails['smtp_password'] = &quot;senha-segura&quot;
gitlab_rails['smtp_domain'] = &quot;empresa.com&quot;
gitlab_rails['smtp_authentication'] = &quot;login&quot;
gitlab_rails['smtp_enable_starttls_auto'] = true
gitlab_rails['gitlab_email_from'] = 'gitlab@empresa.com'
gitlab_rails['gitlab_email_reply_to'] = 'noreply@empresa.com'
</div></section><section class="chapter"><h3 id="testando-configura-o-de-email" data-toc="testando-configura-o-de-email">Testando Configura&ccedil;&atilde;o de Email</h3><div class="code-block" data-lang="bash">
# Testar configura√ß√£o de email
sudo gitlab-rails console

# No console Rails
Notify.test_email('seu-email@exemplo.com', 'Assunto', 'Corpo').deliver_now
</div></section></section><section class="chapter"><h2 id="autentica-o-e-autoriza-o" data-toc="autentica-o-e-autoriza-o">Autentica&ccedil;&atilde;o e Autoriza&ccedil;&atilde;o</h2><section class="chapter"><h3 id="ldap" data-toc="ldap">LDAP</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['ldap_enabled'] = true
gitlab_rails['ldap_servers'] = {
  'main' =&gt; {
    'label' =&gt; 'LDAP Corporativo',
    'host' =&gt;  'ldap.empresa.com',
    'port' =&gt; 389,
    'uid' =&gt; 'sAMAccountName',
    'encryption' =&gt; 'plain',
    'bind_dn' =&gt; 'CN=GitLab,OU=Service Accounts,DC=empresa,DC=com',
    'password' =&gt; 'senha-ldap',
    'active_directory' =&gt; true,
    'base' =&gt; 'OU=Users,DC=empresa,DC=com',
    'user_filter' =&gt; ''
  }
}
</div></section><section class="chapter"><h3 id="oauth-google-github-etc" data-toc="oauth-google-github-etc">OAuth (Google, GitHub, etc)</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['omniauth_enabled'] = true
gitlab_rails['omniauth_allow_single_sign_on'] = ['google_oauth2', 'github']
gitlab_rails['omniauth_block_auto_created_users'] = false
gitlab_rails['omniauth_providers'] = [
  {
    &quot;name&quot; =&gt; &quot;google_oauth2&quot;,
    &quot;app_id&quot; =&gt; &quot;YOUR_APP_ID&quot;,
    &quot;app_secret&quot; =&gt; &quot;YOUR_APP_SECRET&quot;,
    &quot;args&quot; =&gt; { &quot;access_type&quot; =&gt; &quot;offline&quot;, &quot;approval_prompt&quot; =&gt; &quot;&quot; }
  },
  {
    &quot;name&quot; =&gt; &quot;github&quot;,
    &quot;app_id&quot; =&gt; &quot;YOUR_APP_ID&quot;,
    &quot;app_secret&quot; =&gt; &quot;YOUR_APP_SECRET&quot;,
    &quot;args&quot; =&gt; { &quot;scope&quot; =&gt; &quot;user:email&quot; }
  }
]
</div></section></section><section class="chapter"><h2 id="configura-o-de-armazenamento" data-toc="configura-o-de-armazenamento">Configura&ccedil;&atilde;o de Armazenamento</h2><section class="chapter"><h3 id="armazenamento-de-objetos-s3" data-toc="armazenamento-de-objetos-s3">Armazenamento de Objetos (S3)</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['object_store']['enabled'] = true
gitlab_rails['object_store']['connection'] = {
  'provider' =&gt; 'AWS',
  'region' =&gt; 'us-east-1',
  'aws_access_key_id' =&gt; 'SUA_ACCESS_KEY',
  'aws_secret_access_key' =&gt; 'SUA_SECRET_KEY',
  'endpoint' =&gt; 'https://s3.amazonaws.com'
}

# Configurar LFS, Artifacts, Uploads, etc
gitlab_rails['lfs_object_store_enabled'] = true
gitlab_rails['lfs_object_store_remote_directory'] = 'gitlab-lfs-objects'
</div></section><section class="chapter"><h3 id="configura-o-de-backup" data-toc="configura-o-de-backup">Configura&ccedil;&atilde;o de Backup</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['backup_path'] = &quot;/var/opt/gitlab/backups&quot;
gitlab_rails['backup_archive_permissions'] = 0644
gitlab_rails['backup_keep_time'] = 604800  # 7 dias em segundos
</div></section></section><section class="chapter"><h2 id="configura-o-de-performance" data-toc="configura-o-de-performance">Configura&ccedil;&atilde;o de Performance</h2><section class="chapter"><h3 id="recursos-do-sistema" data-toc="recursos-do-sistema">Recursos do Sistema</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
puma['worker_processes'] = 4
puma['max_threads'] = 4
postgresql['shared_buffers'] = &quot;2GB&quot;
postgresql['work_mem'] = &quot;128MB&quot;
</div></section><section class="chapter"><h3 id="caching-com-redis" data-toc="caching-com-redis">Caching com Redis</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['redis_cache_instance'] = &quot;redis://:password@redis-cache.example.com:6379/0&quot;
gitlab_rails['redis_queues_instance'] = &quot;redis://:password@redis-queues.example.com:6379/0&quot;
gitlab_rails['redis_shared_state_instance'] = &quot;redis://:password@redis-shared-state.example.com:6379/0&quot;
</div></section></section><section class="chapter"><h2 id="configura-o-de-seguran-a" data-toc="configura-o-de-seguran-a">Configura&ccedil;&atilde;o de Seguran&ccedil;a</h2><section class="chapter"><h3 id="restri-es-de-registro" data-toc="restri-es-de-registro">Restri&ccedil;&otilde;es de Registro</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
gitlab_rails['gitlab_signup_enabled'] = false
gitlab_rails['gitlab_signin_enabled'] = true
gitlab_rails['gitlab_restricted_visibility_levels'] = ['public']
gitlab_rails['gitlab_default_projects_features_issues'] = true
</div></section><section class="chapter"><h3 id="configura-o-de-firewall" data-toc="configura-o-de-firewall">Configura&ccedil;&atilde;o de Firewall</h3><div class="code-block" data-lang="bash">
# Configurar firewall (Ubuntu/Debian)
sudo ufw allow http
sudo ufw allow https
sudo ufw allow OpenSSH

# Verificar regras
sudo ufw status
</div></section></section><section class="chapter"><h2 id="monitoramento-e-logs" data-toc="monitoramento-e-logs">Monitoramento e Logs</h2><section class="chapter"><h3 id="prometheus-e-grafana" data-toc="prometheus-e-grafana">Prometheus e Grafana</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
prometheus['enable'] = true
grafana['enable'] = true
grafana['admin_password'] = 'senha-segura'
</div></section><section class="chapter"><h3 id="configura-o-de-logs" data-toc="configura-o-de-logs">Configura&ccedil;&atilde;o de Logs</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb
logging['logrotate_frequency'] = &quot;daily&quot;
logging['logrotate_size'] = &quot;10M&quot;
logging['logrotate_rotate'] = 30
</div></section></section><section class="chapter"><h2 id="integra-o-com-runners" data-toc="integra-o-com-runners">Integra&ccedil;&atilde;o com Runners</h2><section class="chapter"><h3 id="registro-de-runner" data-toc="registro-de-runner">Registro de Runner</h3><div class="code-block" data-lang="bash">
# Instalar GitLab Runner
curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
sudo apt-get install gitlab-runner

# Registrar Runner
sudo gitlab-runner register
</div></section><section class="chapter"><h3 id="configura-o-de-runner" data-toc="configura-o-de-runner">Configura&ccedil;&atilde;o de Runner</h3><div class="code-block" data-lang="toml">
# /etc/gitlab-runner/config.toml
[[runners]]
  name = &quot;docker-runner&quot;
  url = &quot;https://gitlab.exemplo.com&quot;
  token = &quot;TOKEN&quot;
  executor = &quot;docker&quot;
  [runners.docker]
    tls_verify = false
    image = &quot;docker:latest&quot;
    privileged = true
</div></section></section><section class="chapter"><h2 id="configura-es-avan-adas" data-toc="configura-es-avan-adas">Configura&ccedil;&otilde;es Avan&ccedil;adas</h2><section class="chapter"><h3 id="alta-disponibilidade" data-toc="alta-disponibilidade">Alta Disponibilidade</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb no n√≥ prim√°rio
roles ['redis_master', 'redis_sentinel', 'postgres_master', 'pgbouncer', 'consul_server']
postgresql['listen_address'] = '0.0.0.0'
redis['bind'] = '0.0.0.0'
</div></section><section class="chapter"><h3 id="geo-replication" data-toc="geo-replication">Geo Replication</h3><div class="code-block" data-lang="ruby">
# /etc/gitlab/gitlab.rb no n√≥ prim√°rio
gitlab_rails['geo_primary_role'] = true

# /etc/gitlab/gitlab.rb no n√≥ secund√°rio
gitlab_rails['geo_secondary_role'] = true
gitlab_rails['geo_secondary_name'] = 'secondary-site'
gitlab_rails['geo_node_name'] = 'secondary-site'
</div></section></section><section class="chapter"><h2 id="pr-ximos-passos" data-toc="pr-ximos-passos">Pr&oacute;ximos Passos</h2><section class="chapter"><h3 id="t-picos-relacionados" data-toc="t-picos-relacionados">T&oacute;picos Relacionados</h3><ul class="list _bullet" id="-bh4wnk_60"><li class="list__item" id="-bh4wnk_62"><p id="-bh4wnk_66"><a href="gitlab-ssh-setup.html" id="-bh4wnk_67" data-tooltip="O SSH (Secure Shell) permite que voc√™ se conecte e autentique em servidores remotos, como o GitLab, de forma segura sem precisar digitar sua senha a cada opera√ß√£o.">Configura&ccedil;&atilde;o SSH no GitLab</a></p></li><li class="list__item" id="-bh4wnk_63"><p id="-bh4wnk_68"><span id="-bh4wnk_69">Configura&ccedil;&atilde;o CI/CD</span></p></li><li class="list__item" id="-bh4wnk_64"><p id="-bh4wnk_70"><span id="-bh4wnk_71">Seguran&ccedil;a no GitLab</span></p></li><li class="list__item" id="-bh4wnk_65"><p id="-bh4wnk_72"><span id="-bh4wnk_73">Backup e Restaura&ccedil;&atilde;o</span></p></li></ul><aside class="prompt" data-type="tip" data-title="" id="-bh4wnk_61"><p id="-bh4wnk_74"><span class="control" id="-bh4wnk_75">Dica Pro</span>: Mantenha um ambiente de teste para validar altera&ccedil;&otilde;es de configura&ccedil;&atilde;o antes de aplic&aacute;-las em produ&ccedil;&atilde;o. Sempre fa&ccedil;a backup antes de grandes mudan&ccedil;as.</p></aside></section></section><div class="last-modified">30 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="gitlab-installation.html" class="navigation-links__prev">Instala&ccedil;&atilde;o do GitLab</a><a href="gitlab-ssh-setup.html" class="navigation-links__next">Configura&ccedil;&atilde;o SSH no GitLab</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>